<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> 

This is just plotting all the rivers, change once finished booking process

<div id="map_canvas" style="width: 550px; height: 450px"></div> 


<script type="text/javascript"> 
//<![CDATA[
	$(document).ready(function () {
     // global "map" variable
      var map = null;
      var marker = null;
      var initialLat = <%= River.first.latitude %>;
      var initialLng = <%= River.first.longitude %>;


			var infowindow = new google.maps.InfoWindow(
			  { 
			    size: new google.maps.Size(150,50)
			  });

			function createMarker(latlng, name, html) {
			    var contentString = html;
			    var marker = new google.maps.Marker({
			        position: latlng,
			        map: map,
			        zIndex: Math.round(latlng.lat()*-100000)<<5
			        });

			    google.maps.event.addListener(marker, 'click', function() {
			        infowindow.setContent(contentString); 
			        infowindow.open(map,marker);
			        });
			    google.maps.event.trigger(marker, 'click');    
			    return marker;
			}

		 

			function initialize() {
			  // create the map
			  var myOptions = {
			    zoom: 6,
			    center: new google.maps.LatLng(initialLat, initialLng),
			    mapTypeControl: true,
			    mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
			    navigationControl: true,
			    mapTypeId: google.maps.MapTypeId.ROADMAP
			  }

			  map = new google.maps.Map(document.getElementById("map_canvas"),
			                                myOptions);

			  var latlng; 

			  <% @pins.each do |p| %>
			  	console.log('hi')
			  	latlng = new google.maps.LatLng(<%= p.latitude %>, <%= p.longitude %>); 
			  	marker = createMarker(latlng, "name");
			  <% end %>
			  
			  

			}
			initialize();
		});
//]]>
</script> 